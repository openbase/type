GET_FILENAME_COMPONENT(@CMAKE_PROJECT_NAME@_CONFIG_DIR "${CMAKE_CURRENT_LIST_FILE}" PATH)

# interface to raw protocol files

SET(EXPERIMENTAL_PROTOS_REL @EXPERIMENTAL_PROTOS_REL@)
SET(EXPERIMENTAL_PACKAGES_REL @EXPERIMENTAL_PACKAGES_REL@)

FOREACH(DOMAIN experimental)
    STRING(TOUPPER ${DOMAIN} DOMAIN_UPPER)

    SET(@CMAKE_PROJECT_NAME@_${DOMAIN_UPPER}_PROTO_ROOT "${@CMAKE_PROJECT_NAME@_CONFIG_DIR}/proto/${DOMAIN}")

    # Ordinary message description files.
    SET(@CMAKE_PROJECT_NAME@_${DOMAIN_UPPER}_PROTOS)
    FOREACH(F ${${DOMAIN_UPPER}_PROTOS_REL})
        LIST(APPEND @CMAKE_PROJECT_NAME@_${DOMAIN_UPPER}_PROTOS "${@CMAKE_PROJECT_NAME@_CONFIG_DIR}/${F}")
    ENDFOREACH()

    # Package description files.
    SET(@CMAKE_PROJECT_NAME@_${DOMAIN_UPPER}_PACKAGES)
    FOREACH(F ${${DOMAIN_UPPER}_PACKAGES_REL})
        LIST(APPEND @CMAKE_PROJECT_NAME@_${DOMAIN_UPPER}_PACKAGES "${@CMAKE_PROJECT_NAME@_CONFIG_DIR}/${F}")
    ENDFOREACH()

ENDFOREACH()

IF(EXISTS "${@CMAKE_PROJECT_NAME@_CONFIG_DIR}/../CMakeCache.txt")
    INCLUDE("${@CMAKE_PROJECT_NAME@_CONFIG_DIR}/@CMAKE_PROJECT_NAME@BuildTreeSettings.cmake")
ELSE()

    SET(@CMAKE_PROJECT_NAME@_INCLUDE_DIRS "${@CMAKE_PROJECT_NAME@_CONFIG_DIR}/../../include/@INSTALL_PREFIX@/experimental")
    SET(@CMAKE_PROJECT_NAME@_RUNTIME_LIBRARY_DIRS "${@CMAKE_PROJECT_NAME@_CONFIG_DIR}/../../bin")

ENDIF()

SET(RSC-CMake_DIR "@RSC-CMakeRSC_DIR@" CACHE PATH "RSC-CMake location")
FIND_PACKAGE(RSC-CMake REQUIRED)
SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${RSC_CMAKE_MODULE_PATH}")

SET(PROTOBUF_ROOT "@PROTOBUF_ROOT@" CACHE PATH "Protobuf location")
FIND_PACKAGE(ProtocolBuffers REQUIRED)
IF(NOT PROTOBUF_LIBRARY)
    MESSAGE(FATAL_ERROR "protobuf library not found")
ENDIF()

FIND_PACKAGE(RST REQUIRED)

LIST(APPEND @CMAKE_PROJECT_NAME@_INCLUDE_DIRS ${PROTOBUF_INCLUDE_DIR})
LIST(APPEND @CMAKE_PROJECT_NAME@_RUNTIME_LIBRARY_DIRS ${PROTOBUF_RUNTIME_LIBRARY_DIRS})

LIST(APPEND @CMAKE_PROJECT_NAME@_INCLUDE_DIRS ${RST_STABLE_INCLUDE_DIR})
LIST(APPEND @CMAKE_PROJECT_NAME@_RUNTIME_LIBRARY_DIRS ${RST_STABLE_RUNTIME_LIBRARY_DIRS})
LIST(APPEND @CMAKE_PROJECT_NAME@_INCLUDE_DIRS ${RST_SANDBOX_INCLUDE_DIR})
LIST(APPEND @CMAKE_PROJECT_NAME@_RUNTIME_LIBRARY_DIRS ${RST_SANDBOX_RUNTIME_LIBRARY_DIRS})
LIST(APPEND @CMAKE_PROJECT_NAME@_INCLUDE_DIRS ${RST_DEPRECATED_INCLUDE_DIR})
LIST(APPEND @CMAKE_PROJECT_NAME@_RUNTIME_LIBRARY_DIRS ${RST_DEPRECATED_RUNTIME_LIBRARY_DIRS})

# Expose RST library as an imported target (from the point of view
# of the downstream project)
IF(NOT @CMAKE_PROJECT_NAME@_CONFIG_PROCESSED)
    SET(@CMAKE_PROJECT_NAME@_CONFIG_PROCESSED TRUE)
    INCLUDE("${@CMAKE_PROJECT_NAME@_CONFIG_DIR}/@CMAKE_PROJECT_NAME@Depends.cmake")
ENDIF()
SET(@CMAKE_PROJECT_NAME@_LIBRARIES @EXPERIMENTAL_LIBRARY_NAME@)
SET(@CMAKE_PROJECT_NAME@_CFLAGS "@RST_CFLAGS@")
